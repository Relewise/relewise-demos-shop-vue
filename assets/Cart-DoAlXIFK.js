import{d as I,g,f as u,q as r,c as j,a as n,b as t,k as m,F as _,r as b,e as c,P as $,s as S,o,l as V,_ as B,w as N,v as q,p as M,x as R}from"./index-7eUIqBpx.js";import{t as f}from"./tracking.service-CmIdkNM9.js";const D={key:0},F={class:"justify-center md:flex md:space-x-6 xl:px-0"},L={class:"rounded md:w-2/3"},T={class:"sm:ml-4 sm:flex sm:w-full sm:justify-between"},z={class:"mt-5 sm:mt-0"},A={class:"text-lg font-semibold text-gray-900"},E={class:"mt-1 text-gray-500"},O={class:"mt-4 flex justify-between sm:space-y-6 sm:mt-0 sm:block sm:space-x-6"},U={class:"flex items-center justify-end border-gray-100"},W=["onClick"],G=["onUpdate:modelValue"],H=["onClick"],J={class:"flex items-center space-x-4"},K={class:""},Q={class:"text-lg text-zinc-900 mr-1 leading-none"},X={key:0,class:"text-zinc-900 line-through"},Y=["onClick"],Z={key:0,class:"mt-6 h-full rounded bg-white p-6 md:mt-0 md:w-1/3"},ee={class:"flex justify-between"},te={class:""},se={class:"mb-1 text-lg font-bold"},oe={key:1,class:""},re={class:"grid gap-3 grid-cols-2 lg:grid-cols-5 mt-3"},ae=I({__name:"Cart",setup(ne){const p=g(void 0),y=u.getRecommender(),h=g(r.model),v=j(()=>r.model.value.lineItems.length===0);function k(){v.value||w()}k();async function w(){const s=new $(u.defaultSettings).setSelectedProductProperties(u.selectedProductProperties).setSelectedVariantProperties({allData:!0}).setNumberOfRecommendations(5).addProducts(r.model.value.lineItems.filter(e=>e.product.productId).map(e=>({productId:e.product.productId}))).filters(e=>S(e)).build(),a=await y.recommendPurchasedWithMultipleProducts(s);u.assertApiCall(a),p.value=a}function x(l,s){r.addProduct({product:l.product,quantityDelta:s}),f.trackCart(r.model.value.lineItems)}function P(l){r.remove(l),f.trackCart(r.model.value.lineItems)}function C(){f.trackOrder(r.model.value.lineItems),r.clear()}return(l,s)=>{var a;return o(),n(_,null,[s[4]||(s[4]=t("h1",{class:"mb-3 text-4xl font-semibold"}," Cart ",-1)),v.value?(o(),n("div",D," Cart is empty ")):m("",!0),t("div",F,[t("div",L,[(o(!0),n(_,null,b(h.value.lineItems,e=>{var d;return o(),n("div",{key:e.product.productId??"",class:"justify-between mb-3 rounded bg-white p-3 sm:flex sm:justify-start"},[V(B,{product:e.product,class:"w-full rounded sm:w-20"},null,8,["product"]),t("div",T,[t("div",z,[t("h2",A,c(e.product.displayName),1),t("p",E,c((d=e.product.brand)==null?void 0:d.displayName),1)]),t("div",O,[t("div",U,[t("span",{class:"cursor-pointer rounded-l bg-gray-100 py-1 px-3.5 duration-100 hover:bg-brand-500 hover:text-brand-50",onClick:i=>x(e,-1)}," - ",8,W),N(t("input",{"onUpdate:modelValue":i=>e.quantity=i,class:"h-8 w-8 border bg-white text-center text-xs outline-none",type:"number",min:"1"},null,8,G),[[q,e.quantity]]),t("span",{class:"cursor-pointer rounded-r bg-gray-100 py-1 px-3 duration-100 hover:bg-brand-500 hover:text-brand-50",onClick:i=>x(e,1)}," + ",8,H)]),t("div",J,[t("p",K,[t("span",Q,c(l.$format(e.product.salesPrice)),1),e.product.salesPrice!==e.product.listPrice?(o(),n("span",X,c(l.$format(e.product.listPrice)),1)):m("",!0)]),(o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-5 w-5 cursor-pointer duration-150 hover:text-red-500",onClick:i=>P(e)},s[0]||(s[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)]),8,Y))])])])])}),128))]),v.value?m("",!0):(o(),n("div",Z,[t("div",ee,[s[2]||(s[2]=t("p",{class:"text-lg font-bold"}," Total ",-1)),t("div",te,[t("p",se,c(l.$format(h.value.lineItems.map(e=>(e.product.salesPrice??0)*e.quantity).reduce((e,d)=>e+d,0))),1),s[1]||(s[1]=t("p",{class:"text-sm text-gray-700"}," including VAT ",-1))])]),t("button",{onClick:C}," Check out ")]))]),p.value?(o(),n("div",oe,[s[3]||(s[3]=t("h2",{class:"text-2xl font-semibold mt-4"}," Recommendations ",-1)),t("div",re,[(o(!0),n(_,null,b(((a=p.value)==null?void 0:a.recommendations)??[],(e,d)=>(o(),M(R,{key:d,product:e},null,8,["product"]))),128))])])):m("",!0)],64)}}});export{ae as default};
